# [\#7156 PR](https://github.com/ethereum/solidity/pull/7156) `closed`: Reduce docker image size

#### <img src="https://avatars.githubusercontent.com/u/424752?u=2d50de05ec528b9b84f8b905a56e90669b0f8927&v=4" width="50">[Marenz](https://github.com/Marenz) opened issue at [2019-07-31 09:06](https://github.com/ethereum/solidity/pull/7156):

By merging the various RUN commands into one single RUN, we reduce the
amount of layers from 16 to 9.

The old RUNs are left as comments so that they can easily be reenabled
when we need to modify the docker image and want to run several
iterations.

fixes #7128

#### <img src="https://avatars.githubusercontent.com/u/424752?u=2d50de05ec528b9b84f8b905a56e90669b0f8927&v=4" width="50">[Marenz](https://github.com/Marenz) commented at [2019-07-31 09:07](https://github.com/ethereum/solidity/pull/7156#issuecomment-516764828):

The actual image generated by this will be pushed to docker-hub once this PR is merged.

#### <img src="https://avatars.githubusercontent.com/u/424752?u=2d50de05ec528b9b84f8b905a56e90669b0f8927&v=4" width="50">[Marenz](https://github.com/Marenz) commented at [2019-07-31 09:15](https://github.com/ethereum/solidity/pull/7156#issuecomment-516768071):

However, I pushed a preview of the image to my personal account: https://hub.docker.com/r/marenz/ethereum/tags

#### <img src="https://avatars.githubusercontent.com/u/9073706?v=4" width="50">[chriseth](https://github.com/chriseth) commented at [2019-08-01 10:38](https://github.com/ethereum/solidity/pull/7156#issuecomment-517229089):

Have you considered using multiple `FROM` instructions as in https://github.com/ethereum/solidity/blob/develop/scripts/Dockerfile#L37

#### <img src="https://avatars.githubusercontent.com/u/9073706?v=4" width="50">[chriseth](https://github.com/chriseth) commented at [2019-08-01 10:42](https://github.com/ethereum/solidity/pull/7156#issuecomment-517230040):

Started it already here: https://github.com/ethereum/solidity/pull/7129

#### <img src="https://avatars.githubusercontent.com/u/424752?u=2d50de05ec528b9b84f8b905a56e90669b0f8927&v=4" width="50">[Marenz](https://github.com/Marenz) commented at [2019-08-01 10:51](https://github.com/ethereum/solidity/pull/7156#issuecomment-517232493):

No, I wasn't aware of multi-stage builds. That approach seems a lot better indeed.


-------------------------------------------------------------------------------



[Export of Github issue for [ethereum/solidity](https://github.com/ethereum/solidity). Generated on 2024.12.15 at 06:45:24.]
